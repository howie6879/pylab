## 网络层

本章节主要对网络层的转发功能和路由选择做区分：

- 转发：转发涉及分组在单一的路由器中从一条入链路到一条出链路的传送
- 路由选择：路由选择涉及一个网络的所有路由器，它们经由路由选择协议共同交互，以决定分组从源到目的地节点所采用的路径

## 概述

### 转发和路由选择

网络层的作用从表面上看极为简单，即将分组从一台发送主机移动到一台接收主机：

- 转发：当分组到达路由器的一条输入链路，路由器必须将该分组移动到合适的输出链路
- 路由选择：当分组从发送方流向接收方，网络层必须决定这些分组所采用的路由或者路径。计算这些路径的算法被称为路由选择算法

### 网络服务模型

网络服务模型定义了分组在发送与接收端系统之间端到端运输特性

在发送主机中，当运输层向网络层传递一个分组时，能由网络层提供的特定服务包括：

- 确保交付
- 具有时延上界的确保交付

此外，能够为给定的源和目的地鼻尖的分组流提供下列服务

- 有序分组交付
- 确保最小带宽
- 确保最大时延抖动
- 安全性服务

![](https://raw.githubusercontent.com/howie6879/howie6879.github.io/img/pictures/20190623215423.png)

### 虚电路和数据报网络

仅在网络层提供连接服务的计算机网络称为虚电路网络；仅在网络层提供无连接服务的计算机网络称为数据报网络

#### 虚电路网络

虽然因特网是一个数据报网络，但如ATM、帧中继的体系结构却是虚电路网络，一条虚电路的组成如下：

- 源和目的主机之间的路径
- VC号，沿着该路径的每段链路的一个号码
- 沿着该路径的每台路由器中的转发表表项

![](https://raw.githubusercontent.com/howie6879/howie6879.github.io/img/pictures/20190627212759.png)

#### 数据报网络

在数据报网络中，每当一个端系统要发送分组，它就为该分组加上目的端系统的地址，然后将分组推进网络中

![](https://raw.githubusercontent.com/howie6879/howie6879.github.io/img/pictures/20190627213234.png)


### 路由器工作原理

一个通用路由器的总体视图：

![](https://raw.githubusercontent.com/howie6879/howie6879.github.io/img/pictures/20190627214633.png)

图中标识了一台路由器的4个组成部分：

- 输入端口
- 交换结构
- 输出端口
- 路由选择处理器

### 网际协议：因特网中的转发和编址

![](https://raw.githubusercontent.com/howie6879/howie6879.github.io/img/pictures/20190627215338.png)

#### 数据报格式

![](https://raw.githubusercontent.com/howie6879/howie6879.github.io/img/pictures/20190627215419.png)

### 路由选择算法

- 全局式路由选择算法
- 分散式路由选择算法





