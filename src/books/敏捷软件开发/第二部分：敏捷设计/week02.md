## 敏捷软件开发第二部份第二周读书笔记

目标：第10,11,12章 ~30页

- LSP
- DIP
- ISP

### 第十章 LSP: Liskov 原则

OCP背后的主要机制是抽象和多态。而支持抽象和多态的关键机制之一是继承，我们需要思考一下几个问题：

- 是什么设计规则在支配着这种特殊的继承用法呢
- 最佳的继承层次的特征又是怎样的呢
- 怎样的情况会使我们创建的类层次结构掉进不符合OCP的陷阱中去呢

上述都是`Liskov`替换原则(LSP)要解答的问题

> 子类型（subtype）必须能够替换掉它们的基类型（base type）

#### 10.1 违反LSP的情形

- 对于LSP的违反常常会导致明显违反OCP的方式使用运行时类型检查
- 一个模型，如果孤立的看，并不具有真正意义上的有效性
- ISA是关于行为的
- 基于契约设计（DBC）：为了准确知道客户的真正需求
	- 前置条件
	- 后置条件
#### 10.2 用提取公共部分的方法代替继承

如果一组类都支持一个公共的职责，那么它们应该从一个公共的超类继承该职责。

如果公共的超类还不存在，那么就创建一个，并把公共的职责放入其中。毕竟，这样一个类的有用性是确定无疑的——你已经展示了一些类会继承这些职责。然而稍后对系统的扩展也许会加入一个新的子类，该子类很可能会以新的方式来支持同样的职责。此时，这个新创建的超类可能会是一个抽象类

#### 10.3 启发式规则和习惯用法

有几个简单的启发规则可以提供一些有关违反LSP的提示

这些规则都和以某种方式从其基类中去除功能的派生类有关。完成的功能少于其基类的派生类通常是不能替换其基类的，因此就违反了LSP

### 第十一章 DIP：依赖倒置原则

依赖倒置原则：

- 高层模块不应该依赖于低层模块，二者都应该依赖于抽象
- 抽象不应该依赖于细节，细节应该依赖于抽象

#### 11.1 层次化

所有结构良好的面向对象构架都具有清晰的层次定义，每个层次通过一个定义良好的、受控的接口向外提供了一组内聚的服务

- 倒置的接口所有权
- 依赖于抽象

#### 11.2 简单的DIP示例

依赖倒置可以应用于任何存在一个类向另一个类发送消息的地方

### 第十二章 ISP：接口隔离原则

- 接口污染
- 分离客户就是分离接口
- 类接口与对象接口
	- 使用委托分离借口
	- 使用多重继承分离接口
- ATM用户界面的例子


